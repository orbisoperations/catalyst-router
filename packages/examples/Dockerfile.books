FROM oven/bun:1.3.6

WORKDIR /app

# Copy root config
COPY package.json bun.lockb ./

# Copy examples package
COPY packages/examples packages/examples
RUN rm -rf packages/examples/node_modules

# Install dependencies from root to handle workspace hoisting correctly
WORKDIR /app
RUN bun install

# Expose port
ENV PORT=8080
EXPOSE 8080

CMD ["bun", "run", "packages/examples/src/books/index.ts"]
