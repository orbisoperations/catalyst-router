# Generated by catalyst-rpi-config v1.0.0
# Mode: native | Device: rpi5 | WiFi: yes
# Re-run `catalyst-rpi-config` to regenerate, or edit this file directly.
#
# Equivalent CLI command:
#   catalyst-rpi-config \
#     --non-interactive \
#     --mode native \
#     --device rpi5 \
#     --hostname catalyst-edge-01 \
#     --username catalyst \
#     --password "your-password" \
#     --wifi-ssid "HomeNetwork" \
#     --wifi-password "wifi-password" \
#     --wifi-country US \
#     --ssh-pubkey-file ~/.ssh/id_ed25519.pub \
#     --node-id "edge-001" \
#     --peering-secret "your-peering-secret" \
#     --no-cloudflared \
#     -o dist/rpi

# Base OS: Debian 12 (Bookworm) minimal with systemd, apt, SSH
include:
  file: bookworm-minbase.yaml

# Target device and login credentials
device:
  layer: rpi5 # Hardware: Raspberry Pi 5
  hostname: catalyst-edge-01
  user1: catalyst # Login username
  user1pass: your-password # Login password (change after first boot)

# Disk image layout
image:
  layer: image-rpios # Standard MBR boot + root partition
  boot_part_size: '200%'
  root_part_size: '400%'
  name: catalyst-node-image

# Layers to include in the build.
# Each entry pulls in a layer YAML and its transitive dependencies.
# Remove a line to exclude that feature from the image.
layer:
  otel: catalyst-otel # OpenTelemetry Collector (native binary)
  app: catalyst-node # Catalyst Node composite server
  wifi: catalyst-wifi # WiFi (wpa_supplicant + systemd-networkd)

# OpenTelemetry Collector version.
# Binary downloaded from github.com/open-telemetry/opentelemetry-collector-releases
otel:
  version: '0.145.0'

# WiFi network configuration.
# Credentials are written to /etc/wpa_supplicant/wpa_supplicant-wlan0.conf
wifi:
  ssid: HomeNetwork
  password: wifi-password
  country: US # ISO 3166-1 alpha-2 regulatory code

# SSH: public key authentication only (password auth disabled)
ssh:
  pubkey_only: 'y'
  pubkey_user1: ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAI...your-key... user@host

# Catalyst Node settings. See: catalyst-node --help for all options
catalyst:
  node_id: edge-001 # Unique identifier (auto-generated on first boot if empty)
  peering_secret: your-peering-secret # iBGP peering shared secret
  domains: '' # Comma-separated trusted domains
  port: '3000' # Composite server listen port
  bootstrap_token: '' # Initial auth bootstrap token
  log_level: info # debug, info, warn, error
