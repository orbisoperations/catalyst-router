# Generated by catalyst-rpi-config v1.0.0
# Mode: docker | Device: rpi5
# Re-run `catalyst-rpi-config` to regenerate, or edit this file directly.
#
# Equivalent CLI command:
#   catalyst-rpi-config \
#     --non-interactive \
#     --mode docker \
#     --device rpi5 \
#     --hostname catalyst-docker-01 \
#     --username catalyst \
#     --password "your-password" \
#     --registry "ghcr.io/your-org" \
#     --tag "latest" \
#     --no-wifi \
#     --no-ssh-pubkey \
#     --no-cloudflared \
#     --peering-secret "your-peering-secret" \
#     -o dist/rpi

# Base OS: Debian 12 (Bookworm) minimal with systemd, apt, SSH
include:
  file: bookworm-minbase.yaml

# Target device and login credentials
device:
  layer: rpi5 # Hardware: Raspberry Pi 5
  hostname: catalyst-docker-01
  user1: catalyst # Login username
  user1pass: your-password # Login password (change after first boot)

# Disk image layout
image:
  layer: image-rpios # Standard MBR boot + root partition
  boot_part_size: '200%'
  root_part_size: '500%'
  name: catalyst-node-image

# Docker: add the build user to the docker group
docker:
  trust_user1: 'y'

# Layers to include in the build.
# Each entry pulls in a layer YAML and its transitive dependencies.
# Remove a line to exclude that feature from the image.
layer:
  container: docker-debian-bookworm # Docker CE engine (built-in layer)
  app: catalyst-docker-stack # Catalyst Node composite server

# Catalyst Node settings. See: catalyst-node --help for all options
catalyst:
  registry: ghcr.io/your-org # Docker registry for catalyst images
  tag: latest # Container image tag
  node_id: '' # Unique identifier (auto-generated on first boot if empty)
  peering_secret: your-peering-secret # iBGP peering shared secret
  domains: '' # Comma-separated trusted domains
  port: '3000' # Composite server listen port
  bootstrap_token: '' # Initial auth bootstrap token
  log_level: info # debug, info, warn, error
